# Railway Configuration for MVPPIR Backend
# https://docs.railway.app/reference/config-as-code

# Backend Service
[[services]]
name = "mvpserver"
rootDirectory = "apps/server"

# Health check
[services.healthcheck]
path = "/health"
timeout = 100
interval = 10

# Build configuration
[services.build]
buildCommand = "pnpm install && pnpm build"
startCommand = "pnpm start"

# Restart policy
[services.deploy]
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# PostgreSQL Database
[[services]]
name = "postgres"
type = "database"
databaseType = "postgresql"

# Database configuration
[services.config]
version = "16"
